---
// src/components/ThemeScript.astro
---

<script is:inline>
  // Script para cargar la preferencia de color desde localStorage
  const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
  
  // 1. Obtener la preferencia del usuario o del sistema
  const savedTheme = localStorage.getItem('theme');
  let currentTheme = 'light';

  if (savedTheme) {
    currentTheme = savedTheme;
  } else if (prefersDarkScheme) {
    currentTheme = 'dark';
  }

  // 2. Aplicar la clase 'dark-mode' al <body> si es necesario
  if (currentTheme === 'dark') {
    document.documentElement.classList.add('dark-mode');
  }

  // 3. FunciÃ³n para cambiar y guardar la preferencia
  window.toggleDarkMode = () => {
    const isDark = document.documentElement.classList.toggle('dark-mode');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  };
</script>
---
// src/components/HeaderLink.astro
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;

// 1. Obtener la base URL que contiene /acastrolab
// Aseguramos que la base URL (ej: /acastrolab) siempre tenga una barra final (/)
const BASE_PATH = import.meta.env.BASE_URL.endsWith('/')
    ? import.meta.env.BASE_URL
    : import.meta.env.BASE_URL + '/';

// 2. Construir el HREF final: BASE_PATH + href (sin la barra inicial duplicada)
// Ejemplo: /acastrolab/ + blog/ -> /acastrolab/blog/
const finalHref = BASE_PATH + href.substring(1);

// --- L贸gica de Activaci贸n (mantenida de tu c贸digo anterior) ---

// Elimina la base de la URL actual del navegador (ej: /acastrolab/about/ -> /about/)
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, ''); 

// Normaliza las rutas para comparaci贸n de "activo"
const normalizedPathname = pathname.endsWith('/') ? pathname : pathname + '/';
const normalizedHref = href.endsWith('/') ? href : href + '/';

// Compara la ruta pasada (ej: /about/) con la ruta actual (ej: /about/)
const isActive = normalizedHref === normalizedPathname;
---

<a href={finalHref} class:list={[className, { active: isActive }]} {...props}>
	<slot />
</a>
<style>
	/* ... (estilos sin cambios) ... */
</style>